<?php class dkSqlPagination { public $url = "index.php"; public $load_type = "page"; public $per_page = 15; public $paginator_length = 10; public $first_last_flag = false; public $query_string_params = array(); public $record_count = 1; public $page_no = 1; public $ajax_js_function_name = "paginator"; public function paginator() { if(!intval($this->page_no)) $this->page_no = 1; $pages = ceil($this->record_count / $this->per_page); if($this->page_no >$pages) $this->page_no = $pages; $limit_end = $this->page_no+$this->paginator_length; if($limit_end > $pages) $limit_end = $pages+1; $result  = array(); $content = array(); $ajax_params = ""; $query_string = ""; foreach ($this->query_string_params as $key => $value) { $query_string.="&$key=$value"; $ajax_params.= ',\''.$value.'\''; } $result['display'] = '<div class="pagination_container">';  if ($pages > 1 && $this->page_no <= $pages) { if ($this->page_no != 1) { if ( $this->first_last_flag) { if( $this->load_type == 'ajax') { $ajax= ' onclick = " return '. $this->ajax_js_function_name.'(1'.$ajax_params.') "'; } else { $ajax= ''; }  $result['display'].= '<div class="pre"> <a href="'.$this->url.'?pn=1'.$query_string.'" style="text-decoration: none" '.$ajax.' >First </a> </div>'; } if($this->load_type == 'ajax') { $ajax= ' onclick = " return '. $this->ajax_js_function_name.'('.($this->page_no-1).$ajax_params.') "'; } else { $ajax= ''; } $result['display'].= '<div class="pagination"> <a href="'.$this->url.'?pn='.($this->page_no-1).$query_string.'" style="text-decoration: none" '.$ajax.' ><<</a> </div>'; } for ($j = $this->page_no; $j < $limit_end; $j++) { if ($this->page_no == $j) { $result['display'].= '<div class="pagination"> <a href="#">'.$j.'</a> </div>'; } else { if( $this->load_type == 'ajax') { $ajax= ' onclick = " return '. $this->ajax_js_function_name.'('.$j.$ajax_params.') "'; } else { $ajax= ''; } $result['display'].= '<div class="pagination"> <a href="'.$this->url.'?pn='.$j.$query_string.'" style="text-decoration: none" '.$ajax.' >'.$j.'</a> </div>'; } } if ($this->page_no < $pages) { if( $this->load_type == 'ajax') { $ajax= ' onclick = " return '. $this->ajax_js_function_name.'('.($this->page_no+1).$ajax_params.') "'; } else { $ajax= ''; } $result['display'].= '<div class="pagination">  <a href="'.$this->url.'?pn='.($this->page_no+1).$query_string.'" style="text-decoration: none" '.$ajax.' >>></a> </div>'; if ( $this->first_last_flag) { if( $this->load_type == 'ajax'){ $ajax= ' onclick = " return '. $this->ajax_js_function_name.'('.$pages.$ajax_params.') "'; } else { $ajax= ''; } $result['display'].= '<div class="next"> <a href="'.$this->url.'?pn='.$pages.$query_string.'" style="text-decoration: none" '.$ajax.' > Last </a> </div>'; } } } $result['display'].= '</div>'; $start_limit = ceil($this->page_no *  $this->per_page)- $this->per_page; $end_limit = $this->per_page; if($start_limit<=0) $start_limit = 0; if($end_limit<=0) $start_limit = $this->per_page; $result['limit'] = " LIMIT $start_limit,$end_limit "; return $result; } }
/*
.pagination_container { float:left; color:#cc0000; font-weight:bold; }
.pagination_container a { color:#444444; }
.pagination { width:20px; height:20px; border:#999999  1px solid; float:left; margin-left:5px; text-align:center; overflow:hidden; line-height:20px; font-family:Arial, Helvetica, sans-serif; cursor:pointer; font-size:12px; }
.pre { width:60px; height:20px; border:#999999  1px solid; float:left; margin-right:10px; text-align:center; overflow:hidden; line-height:20px; font-size:12px; font-family:Arial, Helvetica, sans-serif; cursor:pointer; }
.next { width:60px; height:20px; border:#999999  1px solid; float:left; font-family:Arial, Helvetica, sans-serif; margin-left:13px; text-align:center; overflow:hidden; line-height:20px; font-size:12px; cursor:pointer; }
*/